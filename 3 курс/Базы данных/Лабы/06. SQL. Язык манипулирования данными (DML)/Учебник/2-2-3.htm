<html>
<head>
   <title>Выборка вычисляемых значений</title>

</head>
<body background="fon.jpg">
<div align="center"><b><font>2.2.3. Выборка вычисляемых значений</font></b></div><font size = "-1">

<p align=justify>Из синтаксиса фразы SELECT (п.2.1) видно, что в ней может содержаться не только перечень столбцов таблицы или символ *, но и выражения.</P>
<p align=justify>Например, если нужно получить значение калорийности всех продуктов, то можно учесть, что при окислении 1 г углеводов или белков в организме освобождается в среднем 4.1 ккал, а при окислении 1 г жиров - 9.3 ккал, и выдать запрос:</P>

<PRE>
SELECT	Продукт, ((Белки+Углев)*4.1+Жиры*9.3)
FROM	Продукты;</pre>

<P>результат которого приведен на рис. 2.2,а.</P>

<center><font size="-1">
<TABLE border=1 width=80%>
<TR><TD>а)</TD><TD>б)</TD><TD>в)</TD></TR>
<TR>
<TD><TABLE>
<TR><TH align=left>Продукт</TH><TH></TH></TR>
<TR><TD>Говядина</TD><TD>1928.1</TD></TR>		  
<TR><TD>Судак</TD><TD>1523.</TD></TR>		
<TR><TD>Масло</TD><TD>8287.5</TD></TR>		
<TR><TD>Майонез</TD><TD>6464.7</TD></TR>		
<TR><TD>Яйца</TD><TD>1618.9</TD></TR>		
<TR><TD>Сметана</TD><TD>3011.4</TD></TR>		
<TR><TD>Молоко</TD><TD>605.1</TD></TR>		
<TR><TD>Творог</TD><TD>1575.</TD></TR>		
<TR><TD>Морковь</TD><TD>349.6</TD></TR>		
<TR><TD>Лук</TD><TD>459.2</TD></TR>		 
<TR><TD>Помидоры</TD><TD>196.8</TD></TR>		
<TR><TD>Зелень</TD><TD>118.9</TD></TR>		
<TR><TD>Рис</TD><TD>3512.1</TD></TR>		 
<TR><TD>Мука</TD><TD>3556.7</TD></TR>		
<TR><TD>Яблоки</TD><TD>479.7</TD></TR>		
<TR><TD>Сахар</TD><TD>4091.8</TD></TR>		
<TR><TD>Кофе</TD><TD>892.4</TD></TR>		
</TABLE></TD>

<TD><TABLE>
<TR><TH align=left>Продукт</TH><TH></TH></TR>
<TR><TD>Говядина</TD><TD>Калорий =</TD><TD>1928.1</TD></TR>
<TR><TD>Судак</TD><TD>Калорий =</TD><TD>1523.</TD></TR>
<TR><TD>Масло</TD><TD>Калорий =</TD><TD>8287.5</TD></TR>
<TR><TD>Майонез</TD><TD>Калорий =</TD><TD>6464.7</TD></TR>
<TR><TD>Яйца</TD><TD>Калорий =</TD><TD>1618.9</TD></TR>
<TR><TD>Сметана</TD><TD>Калорий =</TD><TD>3011.4</TD></TR>
<TR><TD>Молоко</TD><TD>Калорий =</TD><TD>605.1</TD></TR>
<TR><TD>Творог</TD><TD>Калорий =</TD><TD>1575.</TD></TR>
<TR><TD>Морковь</TD><TD>Калорий =</TD><TD>349.6</TD></TR>
<TR><TD>Лук	</TD><TD>Калорий =</TD><TD>459.2</TD></TR>
<TR><TD>Помидоры</TD><TD>Калорий =</TD><TD>196.8</TD></TR>
<TR><TD>Зелень</TD><TD>Калорий =</TD><TD>118.9</TD></TR>
<TR><TD>Рис	</TD><TD>Калорий =</TD><TD>3512.1</TD></TR>
<TR><TD>Мука</TD><TD>Калорий =</TD><TD>3556.7</TD></TR>
<TR><TD>Яблоки</TD><TD>Калорий =</TD><TD>479.7</TD></TR>
<TR><TD>Сахар</TD><TD>Калорий =</TD><TD>4091.8</TD></TR>
<TR><TD>Кофе</TD><TD>Калорий =</TD><TD>892.4</TD></TR>
</TABLE></TD>

<TD><TABLE>
<TR><TH align=left>Продукт</TH><TH></TH></TR>
<TR><TD>Зелень</TD><TD>118.9</TD></TR>
<TR><TD>Помидоры</TD><TD>196.8</TD></TR>  
<TR><TD>Морковь</TD><TD>349.6</TD></TR>  
<TR><TD>Лук</TD><TD>459.2</TD></TR>  
<TR><TD>Яблоки</TD><TD>479.7</TD></TR>  
<TR><TD>Молоко</TD><TD>605.1</TD></TR>  
<TR><TD>Кофе</TD><TD>892.4</TD></TR>  
<TR><TD>Судак</TD><TD>1523.</TD></TR>
<TR><TD>Творог</TD><TD>1575.</TD></TR>
<TR><TD>Яйца</TD><TD>1618.9</TD></TR> 
<TR><TD>Говядина </TD><TD>1928.1</TD></TR>  
<TR><TD>Сметана</TD><TD>3011.4</TD></TR>  
<TR><TD>Рис</TD><TD>3512.1</TD></TR> 
<TR><TD>Мука</TD><TD>3556.7</TD></TR>  
<TR><TD>Сахар</TD><TD>4091.8</TD></TR>  
<TR><TD>Майонез</TD><TD>6464.7</TD></TR>  
<TR><TD>Масло</TD><TD>8287.5</TD></TR>  
</TABLE></TD>
</TR>
</TABLE>
</font></center>


<p align=justify><I>	Рис. 2.2. Примеры запросов с вычисляемыми полями</I></P>

<p align=justify>Фраза SELECT может включать не только выражения, но и отдельные числовые или текстовые константы. Следует отметить, что текстовые константы должны заключаться в апострофы ('). На рис. 2.2,б приведен результат запроса:</P>

<PRE> 
 SELECT	Продукт, 'Калорий =', 
            ((Белки+Углев)*4.1+Жиры *9.3)
  FROM		Продукты;</PRE>

<p align=justify>А что произойдет, если какой-либо член выражения не определен, т.е. имеет значение NULL и каким образом появилось такое значение?</P>
<p align=justify>Если при загрузке строк таблицы в какой-либо из вводимых строк отсутствует значение для какого-либо столбца, то СУБД введет в такое поле NULL-значение. NULL-значение "придумано" для того, чтобы представить единым образом "неизвестные значения" для любых типов данных. Действительно, так как при вводе данных в столбец или их изменении СУБД запрещает ввод значений не соответствующих описанию данных этого столбца, то, например, нельзя использовать пробел для отсутствующего значения числа. Нельзя для этих целей использовать и ноль: нет месяца или дня недели равного нулю, да и для чисел ноль не может рассматриваться как неизвестное значение в одном месте и как известное - в другом. При выводе же NULL-значения на экран или печатающее устройство его код воспроизводится каким-либо специально заданным символом или набором символов: например, пробелом (если его нельзя перепутать с текстовым значением пробела) или сочетанием -0-.</P>
<p align=justify>С помощью специальной команды можно установить в СУБД один из режимов представления NULL-значений при выполнении числовых расчетов: запрет или разрешение замены NULL-значения нулем. В первом случае любое арифметическое выражение, содержащее неопределенный операнд, будет также иметь неопределенное значение. Во втором случае результат вычислений будет иметь численное значение (если это значение попадает в диапазон представления соответствующего типа данных).</P>
<p align=justify>Например, при выполнении запроса</P>

<PRE>
SELECT	ПР, Цена, К_во, (Цена * К_во)
FROM	Поставки;</PRE>

<P>и разных "настройках" СУБД могут быть получены разные результаты:</P>

<center><font size="-1">
<TABLE border=1>
<TR><TD>
<TABLE>
<TR><th>ПР</TH><th>Цена</TH><th>К_во</TH><th>(Цена*К_во)</th></TR>
<TR><TD>9</TD><TD>-0-</TD><TD>-0-</TD><TD>-0-</TD></TR>
<TR><TD>11</TD><TD>1.5</TD><TD>50</TD><TD>75.</TD></TR>
<TR><TD>12</TD><TD>3.</TD><TD>10</TD><TD>30.</TD></TR>
<TR><TD>15</TD><TD>2.</TD><TD>170</TD><TD>340.</TD></TR>
</TABLE></TD>

<TD><TABLE>
<TR><th>ПР</TH><th>Цена</TH><th>К_во</TH><th>(Цена*К_во)</th></TR>
<TR><TD>9</TD><TD>-0-</TD><TD>-0-</TD><TD>0.</TD></TR>
<TR><TD>11</TD><TD>1.5</TD><TD>50</TD><TD>75.</TD></TR>
<TR><TD>12</TD><TD>3.</TD><TD>10</TD><TD>30.</TD></TR>
<TR><TD>15</TD><TD>2.</TD><TD>170</TD><TD>340.</TD></TR>

</TABLE></TD></TR>
</TABLE></font>
</center>

<p align="center">
<a href="2-2-1.htm#2-2-2">2.2.2</a> | <a href="index.htm">Содержание</a> | <a href="2-3-1.htm">2.3.1</a>
</p>

</body>
</html>

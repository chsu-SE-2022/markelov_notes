<html>
<head>
   <title>Операции выборки из представлений</title>

</head>
<body background="fon.jpg">
<div align="center"><b><font>5.4.2. Операции выборки из представлений</font></b></div><font size = "-1">

<p align=justify>Создав представление Мясные_блюда пользователь может считать, что в базе данных реально существует такая таблица и дать, например, запрос на получение из нее всех данных:</p>
<pre>
SELECT *
FROM	Мясные_блюда;
</pre>
<p align=justify>результат которого имеет вид</p>
<TABLE>
<TR><TH>БЛ</TH><TH>  Блюдо    </TH><TH>        В  </TH><TH>Выход</TH></TR>
<TR><TD>2   </TD><TD>Салат мясной  </TD><TD>   З </TD><TD> 200</TD></TR>
<TR><TD>6 </TD><TD>  Мясо с гарниром  </TD><TD>З </TD><TD> 250</TD></TR>
<TR><TD>9 </TD><TD>  Суп харчо      </TD><TD>  С  </TD><TD>500</TD></TR>
<TR><TD>13 </TD><TD> Бастурма       </TD><TD>  Г  </TD><TD>300</TD></TR>
<TR><TD>14 </TD><TD> Бефстроганов    </TD><TD> Г </TD><TD> 210</TD></TR>
</TABLE>

<p align=justify>Поскольку при определении представления может быть использован любой допустимый подзапрос, то выборка данных может осуществляться как из базовых таблиц, так и из представлений:</p>
<pre>
CREATE VIEW Горячие_мясные_блюда
	AS SELECT	Блюдо, Продукт, Вес
		FROM	Мясные_блюда, Состав, Продукты
		WHERE	Мясные_блюда.БЛ = Состав.БЛ
		AND	Продукты.ПР = Состав.ПР
		AND	В = 'Г';
</pre>
<p align=justify>Если теперь возникла необходимость получить сведения о горячих мясных блюдах, в состав которых входят помидоры, то можно сформировать запрос</p>
<pre>
SELECT	Блюдо, Продукт, Вес
FROM	Горячие_мясные_блюда
WHERE	Блюдо IN
	(	SELECT Блюдо
		FROM	Горячие_мясные_блюда
		WHERE  Продукт = 'Помидоры')
</pre>
<p align=justify>и получить:</p>
<TABLE>
<TR><TH>Блюдо   </TH><TH>  Продукт </TH><TH>  Вес</TH></TR>
<TR><TD>Бастурма </TD><TD> Говядина  </TD><TD>180</TD></TR>
<TR><TD>Бастурма </TD><TD> Помидоры  </TD><TD>100</TD></TR>
<TR><TD>Бастурма </TD><TD> Лук       </TD><TD>40</TD></TR>
<TR><TD>Бастурма </TD><TD> Зелень    </TD><TD>20</TD></TR>
<TR><TD>Бастурма </TD><TD> Масло     </TD><TD>5</TD></TR>
</TABLE>

<p align=justify>Легко заметить, что данный запрос, осуществляющий выбор данных через два представления, выглядит для пользователя точно так же, как обычный SELECT, оперирующий обычной базовой таблицей. Однако СУБД преобразует его при выполнении в эквивалентную операцию над лежащими в основе базовыми таблицами (перед выполнением проводит слияние выданного пользователем SELECT с предложениями SELECT из описаний представлений, хранящихся в каталоге).	</p>

<p align="center">
<a href="5-4-1.htm">5.4.1</a> | <a href="index.htm">Содержание</a> | <a href="5-4-3.htm">5.4.3</a>
</p>

</body>
</html>

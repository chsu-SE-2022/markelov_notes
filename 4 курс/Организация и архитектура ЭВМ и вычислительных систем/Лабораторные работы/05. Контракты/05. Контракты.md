**Задание: Система расчета скидок**  
**Цель:** Закрепить на практике применение контрактов сущности, типа и сервиса для создания гибкого механизма расчета скидок.  
**Сценарий:** В компании существует несколько типов клиентов (например, "Обычный", "Постоянный", "VIP") и несколько видов скидок ("Накопительная", "Сезонная", "Промокод"). Необходимо реализовать систему, которая для любого клиента и любой корзины товаров могла бы рассчитать итоговую скидку, при этом позволяя легко добавлять новые типы скидок в будущем.  
**Часть 1: Контракт сущности (определение сущности)**
1. Создайте контракт сущности с именем `Клиент`
2. Создайте перечисление `ТипыКлиентов` со значениями: `Обычный`, `Постоянный` и `VIP`
3. Добавьте в него свойство `Наименование` (тип `Строка`)
4. Убедитесь, что таблицы контракта будут созданы в базе данных (`ТаблицыКонтракта = Доступны`)
5. На основе этого контракта создайте справочник `Клиенты` и добавьте несколько элементов с разными типами клиентов (например, `"Иванов А.А. (Обычный)"`, `"Петров В.В. (Постоянный)"` и т. п.)
  
**Часть 2: Контракт типа (определение поведения)**
1. Создайте контракт типа с именем `ИсточникСкидки`
2. Окружение: `Сервер`
3. Объявите в нём абстрактный метод:
	- `РассчитатьСкидку(СуммаЧека: Число) → Число` - метод должен возвращать размер скидки в денежных единицах для переданной суммы чека
4. Реализуйте этот контракт в справочнике `Клиенты`
	- Для простоты, реализуйте разную логику расчета в зависимости от типа клиента:
		- Если тип клиента `"(Обычный)"`, скидка = 0
		- Если тип клиента `"(Постоянный)"`, скидка = 100
		- Если тип клиента `"(VIP)"`, скидка = 5% от суммы чека (`0.05 * СуммаЧека`)
  
**Часть 3: Контракт сервиса (определение сервисов)**  
1. Создайте множественный контракт сервиса с именем `СтратегияСкидки`
2. Окружение: `Сервер`
3. Объявите в нём метод:
	- `Рассчитать(СуммаЧека: Число, Источник: ИсточникСкидки) → Число` - метод возвращает размер дополнительной скидки по своей стратегии
4. Создайте и реализуйте два общих модуля с серверной реализацией этого контракта:
	- `СкидкаНакопительная`: рассчитывает скидку как 2% от суммы чека, если она превышает 5000. Окружение: `Сервер`
	- `СкидкаСезонная`: возвращает фиксированную скидку 200, если текущий месяц декабрь (12). Окружение: `Сервер`
  
**Часть 4: Написание итогового кода**  
1. Создайте обработку `"РасчетСкидок"`
2. Добавьте в нее реквизит `Клиент` с типом `Клиент.Ссылка` и `СуммаЧека` (тип `Число`)
3. Напишите серверный метод `РассчитатьИтоговуюСкидку()`, который:
	- Получает все реализации сервиса `СтратегияСкидки` (`ПолучитьСервисы()`)
	- Приводит ссылку на выбранного клиента к типу контракта `ИсточникСкидки`
	- Рассчитывает базовую скидку от клиента, используя метод `РассчитатьСкидку(СуммаЧека)` контракта типа
	- Последовательно применяет все стратегии скидок, суммируя результаты их метода `Рассчитать()`
	- Возвращает общую сумму всех скидок (базовая + по всем стратегиям)
4. Выведите результат расчета на форму обработки.
  
**Критерии успешного выполнения:**
- Создан контракт сущности `Клиент` и на его основе работает справочник
- Контракт типа `ИсточникСкидки` реализован в справочнике `Клиенты` и расчет базовой скидки работает
- Созданы и реализованы два сервиса, соответствующих контракту `СтратегияСкидки`
- Код в обработке корректно использует `ПолучитьСервисы()` для получения всех стратегий и суммирует скидки
- При изменении клиента или суммы чека итоговая скидка пересчитывается по кнопке
  
**Пояснение:** это задание демонстрирует мощь контрактов. Чтобы добавить новую стратегию скидок (например, `"СкидкаДняРождения"`), вам нужно будет создать всего один новый модуль, реализующий контракт `СтратегияСкидки`. Код в обработке `РассчитатьИтоговуюСкидку()` изменять не потребуется - он автоматически начнет использовать новую стратегию. Это и есть та самая гибкость и расширяемость, ради которой мы используем контракты.  
**Результат для сдачи:** представьте преподавателю гиперссылку на ваше работающее приложение и логин/пароль тестового пользователя (созданного в разделе `Пользователи` карточки приложения), чтобы он мог проверить работу механизма.
**Задание: «Ведение истории изменений цен в интернет-магазине»**  
**Цель задания:** Закрепить на практике навыки работы с панелью управления, создания приложений и реализации базовой бизнес-логики через среду разработки технологии 1С:Предприятие.Элемент.  
**Исходные условия:** Вы - разработчик в компании, которая запускает интернет-магазин. Менеджеру магазина необходим инструмент для отслеживания, кто и когда менял цены на товары. Вам поручено реализовать этот механизм.  
**Часть 1: Подготовка среды разработки**  
1. Войдите в панель управления: https://1cmycloud.com/console
2. Создайте новое приложение с нуля, выбрав вариант «Создание нового проекта»
3. Параметры проекта:
	- Шаблон: `Пустой проект`
	- Встроенный язык: `Русский`
	- Имя проекта: `OnlineStore` (без пробелов и цифр)
	- Представление проекта: `Магазин товаров`
	- Версия технологии: `Актуальная версия (8.0.1-59 и выше)`.
4. Заполните данные приложения (можно оставить по умолчанию, сгенерированные из проекта) и нажмите «Создать»
5. После создания проекта и приложения перейдите в карточку проекта и настройте репозитории как было показано на лекции
  
![Ветки проекта](../../Pictures/ЛБ01_01.%20Ветки%20проекта.png)  
6. После настройки репозитория перейдите в карточку приложения и нажмите кнопку «Разработка» для запуска среды разработки
  
![Кнопка Разработка](../../Pictures/ЛБ01_02.%20Кнопка%20Разработка.png)  
**Часть 2: Проектирование элементов проекта**  
В открывшейся среде разработки вам необходимо создать элементы проекта:
1. Создайте подсистему `Основное`
2. Создайте новый `Справочник` и назовите его `Товары`
3. Добавьте в справочник `Товары` следующие реквизиты:
	- `Цена` (тип `Число`, длина целой части 10, длина дробной части 2)  
	![Реквизит Цена](../../Pictures/ЛБ01_03.%20Реквизит%20Цена.png)
4. Добавьте в справочник `Товары` табличную часть (ТЧ) с именем `ИсторияЦен`.
	- В составе ТЧ создайте реквизиты:
		- `Цена` (тип `Число`, длина целой части 10, длина дробной части 2)
		- `ДатаИзменения` (тип `ДатаВремя`)
		- `КтоИзменил` (тип `Строка`)
  
**Часть 3: Реализация бизнес-логики**  
Необходимо автоматизировать запись истории изменений.
1. Откройте модуль объекта справочника `Товары`.
2. В модуле объекта напишите обработчик события `ПередЗаписью()`, который будет срабатывать при сохранении элемента справочника (по аналогии обработчика из проекта в котором было реализована история изменения информации).
3. Логика обработчика:
	- Если у элемента изменяется реквизит `Цена`, то в табличную часть `ИсторияЦен` необходимо добавить новую строку.
	- В новую строку запишите:
		- `Цена` - текущее значение реквизита `Цена`
		- `ДатаИзменения` - текущую дату и время (используйте функцию `ДатаВремя.Сейчас()`)
		- `КтоИзменил` - `"напишите ваше ФИО строкой в кавычках"`. Например: `"Иванов Иван Иванович"` или `"Иванов И.И"`
4. Важно: в качестве основы метода для проверки изменения цены используйте пример из прошлой лекции. Проверка цены должна быть упрощенной, без циклов и универсальных методов. Просто поиск последней цены, сравнение старой и новой цены и добавление записи в ТЧ `ИсторияЦен`.
	```bsl
	ФОбработчик
	метод ПередЗаписью(До: Сотрудники Данные, ПараметрыЗаписи: Сотрудники.ПараметрыЗаписи)
		для ДанныеОВиде из ВидыИнформации.Виды()
			знч ПоследнииИзменения = До.ИсторияИзменения.Фильтровать(Фильтр -> Фильтр.Вид == ДанныеОВиде.Вид)
			.СортироватьПо(Сортировка -> Сортировка. Датайзменения, НаправлениеСортировки.ПоУбыванию)
			.ПервыйИлиНеопределено()
		
		если Последниийзменения ! Неопределено
			знч НовоеЗначение УниверсальныеМетоды.ЗначениеРеквизита(этот, ДанныеОВиде.ИмяПредопределенныхДанных)
			
			если ПоследнииИзменения.Значение != НовоеЗначение
				ИсторияИзменения.Добавить(новый Сотрудники.ИсторияИзменения (Вид - ДанныеОВиде.Вид, ДатаИзменения = ДатаВремя.Сейчас(), Значение = НовоеЗначение))
			;
		иначе
			ИсторияИзменения.Добавить(новый Сотрудники. ИсторияИзменения(Вид = ДанныеОВиде.Вид, ДатаИзменения = ДатаВремя.Сейчас(), Значение = УниверсальныеМетоды.ЗначениеРеквизита(этот, ДанныеОВиде.ИмяПредопределенныхДанных)))
	```
  
**Часть 4: Тестирование**  
1. Опубликуйте проект (кнопка в нижнем левом углу откроется меню с командой Опубликовать проект или можно нажать F9)
2. Откройте приложение через панель управления (кнопка в нижнем левом углу откроется меню с командой `Открыть приложение` или можно нажать CTRL+F5)
3. Перейдите в раздел `Товары`, создайте новый товар и укажите его первоначальную цену
4. Измените цену этого товара и сохраните изменения
5. Снова откройте карточку товара. Убедитесь, что в таблице `ИсторияЦен` появилась запись с новой ценой, датой изменения и указанием пользователя
6. После тестирования вернитесь в среду разработки и зафиксируйте коммиты в репозитории
7. После снова опубликуйте проект
8. Зайдите в карточку проекта и выпустите релизную сборку
## Этапы развития программного обеспечения
Эволюция вычислительных машин тесно связана с развитием их программного обеспечения. В истории развития программного обеспечения можно выделить следующие поколения:
- Первое поколение - зарождение ПО
- Второе поколение - развитие ПО: использование алгоритмических языков и библиотек стандартных программ
- Третье поколение - широкое использование ПО, появление развитых операционных систем
- Четвертое поколение - ПО, дающее возможность коллективного использования ЭВМ
#### Первое поколение - зарождение ПО
Ключевые особенности:
- ЭВМ реализовывает последовательный принцип действия
- Низкая производительность ЭВМ
- Высокая квалификация математика-программиста
- ПО тесно связано с машинным языком ЭВМ
- Появление **стандартных программ** - повторное использование фрагментов ПО, разработанных ранее
- Созданы **компилирующие** и **интерпретирующие** программы
- Появилось **символическое кодирование** - использование именований вместо конкретных численных адресов (в памяти)
- Появились **макрокоманды** - программный алгоритм, записанный (сохраненный) пользователем
- Разработка и отладка программ трудоемка, поэтому для выполнения посреднических функций появился **оператор ЭВМ**
#### Второе поколение - развитие ПО
Ключевые особенности:
- Возникновение средств автономной отладки и средств управления режимом решения задачи
- Создание специальных программ, которые позволили возложить на ЭВМ часть функций по организации и управлению вычислительным процессом:
	- Прием задач для выполнения, планирование их выполнения и выделение ресурсов
	- Организация одновременного выполнения нескольких задач
	- Организация взаимодействия с внешними устройствами
	- Выполнение вспомогательных работ, облегчающих реализацию различных этапов вычислительного процесса
  
Все это позволило исключить приостановки при переходе от одного этапа решения задачи к другому или при смене задач, свело к минимуму ручные манипуляции и обеспечило высокий коэффициент использования оборудования
#### Третье поколение - широкое использование ПО
Ключевые особенности:
- Возникновение операционных систем - совокупность программ для управления оборудованием, данными, вычислительным процессом и связи оператора с машиной
- Использование языков программирования высокого уровня (того времени): Алгол-60, ПЛ/1, РПГ
- Использование ЯП непрофессиональными пользователями за счет использования трансляторов и библиотек стандартных программ, средств отладки
- ПО строится открытым, т. е. его состав может постоянно расширяться
#### Четвертое поколение - ПО для коллективного использования ЭВМ
Ключевые особенности:
- Разработка диалоговых систем коллективного использования
- Совершенствование систем управления данными
- Обеспечение типовых многопроцессорных и многомашинных систем
- Появление тенденции переноса функций из программных библиотек в аппаратную реализацию
#### Задачи совершенствования ПО
- Диалог человек-машина на любом языковом уровне
- Автоматическое исправление ошибок пользователей
- Получение пользователем информации любой степени подробности о состоянии вычислительного процесс и обрабатываемых данных
- Широкое использование принципа самоопределяемости данных
- Почти полное отсутствие ограничений на выбор удобного для пользователей представления предложений языка
- Объединение и упрощение языков программирования, их ориентация на структурное программирование
- Схемная реализация программного обеспечения (его наиболее часто используемой части)
- Изменение структуры операционной системы с целью создания ее иерархической конфигурации, включающей ядро
- Использование проблемно-ориентированных систем программирования
- Генерация программного обеспечения для решения классов задач
- Оптимизация программного обеспечения
- Комплексное рассмотрение проблем предприятия
#### Пятое поколение ПО
Позволяет решать еще более сложные системные задачи, известные под названием проблем искусственного интеллекта. Для их решения требуются вычислительные средства, способные обеспечить функционирование самоорганизующихся алгоритмов. Структура вычислительных средств должна допускать изменения алгоритма управления процессом вычислений в течение времени решения задачи.
## Современные инфраструктурные решения
Рассмотрим основные тенденции развития инфраструктурных решений, которые, так или иначе, способствовали появлению концепции облачных вычислений
- Рост производительности компьютеров. Появление многопроцессорных и многоядерных вычислительных систем, развитие блейд-систем
- Появление Grid-вычислений
- Консолидация инфраструктуры
#### Блейд-системы
**Blade-сервер** - это модульная одноплатная компьютерная система, включающая процессор и пямать.  
![Blade-сервер](../Pictures/07_01.%20Blade-сервер.png)  
Преимущества blade-серверов:
- Уникальная физическая конструкция
- Лучшие возможности управления и гибкость
- Масштабируемость
- Повышенная надежность
- Снижение эксплуатационных расходов
  
Недостатки:
- Отсутствие общего стандарта и общей платформы
- Одна точка отказа - шасси блейд-системы
- Неэффективен для задач, требующих малого числа серверов
- Выполняет эффективно ограниченный класс задач, требует оптимизированное ПО
- Отсутствует возможность установки плат расширений
- Ограниченный объем памяти, подразумевает использование внешней системы хранения данных
#### Grid-вычисления
**Грид-вычисления** (англ. grid - решетка, сеть) - это форма распределенных вычислений, в которой "виртуальный суперкомпьютер" представлен в виде кластеров, соединенных с помощью сети, слабосвязанных гетерогенных компьютеров, работающих вместе для выполнения огромного количества заданий (операций, работ).  
![Grid-вычисления](../Pictures/07_02.%20Grid-вычисления.png)  
В настоящее время выделяют 3 основных типа грид-систем:
1. **Добровольные гриды** - гриды на основе использования добровольно предоставляемого свободного ресурса персональных компьютеров; BOINC
2. **Научные гриды** - хорошо распараллеливаемые приложения программируются специальным образом (например, с использованием Globus Toolkit)
3. **Гриды на основе выделения вычислительных ресурсов по требованию** (коммерческий грид, англ. enterprice grid) - обычные коммерческие приложения работают на виртуальном компьютере, который, в свою очередь, состоит из нескольких физических компьютеров, объединенных с помощью грид-технологий
#### Консолидация инфраструктуры
**Консолидация** - это объединение вычислительных ресурсов либо структур управления в едином центре.  
![Консолидация инфраструктуры](../Pictures/07_03.%20Консолидация%20инфраструктуры.png)  
- **Консолидация серверов** - перемещение децентрализованных приложений, распределенных на различных серверах компании, в один кластер централизованных гомогенных серверов
- **Консолидация систем хранения** - совместное использование централизованной системы хранения данных несколькими гетерогенными узлами
- **Консолидация приложений** - размещение нескольких приложений на одном хосте
  
2 базовых типа консолидации:
- **Физическая** - географическое перемещение серверов на единую площадку (ЦОД)
- **Логическая** - централизация управления
  
Сценарий **гомогенной консолидации** предусматривает перенос одного масштабного приложения, ранее выполнявшегося на нескольких серверах, на один, более мощный. В качестве примера такой операции можно привести базы данных, которые зачастую наращивают экстенсивным путем по мере роста объема обрабатываемой информации. Объединение данных и приложений на одном сервере заметно ускоряет процессы обработки и поиска, а также повышает уровень целостности.  
**Гетерогенная консолидация** по содержанию схожа с гомогенной, но в этом случае объединению подлежат разные приложения. Например, несколько экземпляров Exchange Server и SQL Server, ранее запускавшиеся на отдельных компьютерах, могут быть сведены на единой машине. Преимущества гетерогенной консолидации - возрастающая масштабируемость сервисов и более полное задействование системных ресурсов.
## Подход "одно приложение - один сервер" (до виртуализации)
Недостатки такого подхода:
- Низкая загрузка процессорных мощностей серверов - 10-20%
- Требуется большой парк серверов
- Возрастание затрат на администрирование, энергопотребление и охлаждение, а также потребность в дополнительных помещениях для установки все новых серверов
- Возрастание затраты на приобретении лицензий на серверную ОС
## Подход "один сервер - несколько приложений"
**Виртуализация** ресурсов физического сервера позволяет гибко распределять их между приложениями, каждое из которых при этом "видит" только предназначенные ему ресурсы и "считает", что ему выделен отдельный сервер.  
В основе виртуализации лежит возможность одного компьютера выполнять работу нескольких компьютеров благодаря распределению его ресурсов по нескольким средам.  
![Один сервер - несколько приложений](../Pictures/07_04.%20Один%20сервер%20-%20несколько%20приложений.png)  
Популярные средства виртуализации:
- Vmware
- Hyper-V
- Xen
- VirtualBox
  
Преимущества виртуализации:
- Эффективное использование вычислительных ресурсов
- Сокращение расходов на инфраструктуру
- Снижение затрат на программное обеспечение
- Повышение гибкости и скорости реагирования системы
- Несовместимые приложения могут работать на одном компьютере
- Повышение доступности приложений и обеспечение непрерывности работы предприятия
- Возможности легкой архивации
- Повышение управляемости инфраструктуры
## Виртуальная машина
**Виртуальной машиной** будем называть программную или аппаратную среду, которая скрывает настоящую реализацию какого-либо процесса или объекта от его видимого представления.  
**Виртуальная машина** - это полностью изолированный программный контейнер, который работает с собственной ОС и приложениями, подобно физическому компьютеру. Виртуальная машина действует так же, как физический компьютер, и содержит собственные виртуальные (т. е. программные) ОЗУ, жесткий диск и сетевой адаптер.  
ОС не может различить виртуальную и физическую машины. То же самое можно сказать о приложениях и других компьютерах в сети.  
Основные особенности виртуальных машин:
1. **Совместимость** со стандартными компьютерами
2. **Изолированность** виртуальных машин друг от друга, как между отдельными физическими устройствами
3. **Инкапсуляция** - ВМ полностью инкапсулируют вычислительную среду (аппаратное обеспечение сервера - хоста)
4. **Независимость от оборудования** - ВМ полностью независимы от базового физического оборудования, на котором они работают
## Основные разновидности виртуализации
- Виртуализация серверов (полная виртуализация и паравиртуализация)
- Виртуализация приложений
- Виртуализация представлений
- Эмуляция
#### Эмуляция
Самая сложная виртуализация обеспечивается эмуляцией аппаратных средств.  
![Эмуляция](../Pictures/07_05.%20Эмуляция.png)  
Недостатки:
- Существенное замедление выполнения программ в такой среде, поскольку каждая команда должна моделироваться на основных аппаратных средствах, при этом замедление в 100 раз при эмуляции является обычным делом
  
Преимущества:
- Используя эмуляцию аппаратных средств, можно управлять неизменной операционной системой, предназначенной для PowerPC на системе с ARM процессором
- Можно управлять многочисленными виртуальными машинами, каждая из которых будет моделировать другой процессор
## Виртуализация серверов
Виртуализация серверов подразумевает запуск на одном физическом сервере нескольких виртуальных серверов. Виртуальные машины или сервера представляют собой приложения, запущенные на хостовой операционной системе, которые эмулируют физические устройства сервера.  
![Виртуализация серверов](../Pictures/07_06.%20Виртуализация%20серверов.png)  
1. **Поддержка неоднородных операционных сред** (в том числе, для работы унаследованных приложений). Этот случай наиболее часто встречается в рамках корпоративных информационных систем. Технически проблема решается путем одновременной работы на одном компьютере нескольких виртуальных машин, каждая из которых включает экземпляр операционной системы. Но реализация этого режима выполнялась с помощью двух принципиально разных подходов: **полной виртуализации** и **паравиртуализации**
2. **Поддержка однородных вычислительных сред** подразумевает изоляцию служб в рамках одного экземпляра ядра операционной системы (**виртуализация на уровне ОС**), что наиболее характерно для хостинга приложений провайдерами услуг
## Полная виртуализация
Использует гипервизор, который осуществляет связь между гостевой операционной системой и аппаратными средствами системы.  
![Полная виртуализация](../Pictures/07_07.%20Полная%20виртуализация.png)
## Паравиртуализация
Модификация ядра гостевой ОС выполняется таким образом, что в нее включается новый набор API, через который она может напрямую работать с аппаратурой, не конфликтуя с другими виртуальными машинами.  
![Паравиртуализация](../Pictures/07_08.%20Паравиртуализация.png)
## Виртуализация уровня операционной системы
Виртуализирует серверы непосредственно над операционной системой. Этот метод поддерживает единственную операционную систему и, в самом общем случае, просто изолирует независимые виртуальные серверы (контейнеры) друг от друга.  
![Виртуализация уровня операционной системы](../Pictures/07_09.%20Виртуализация%20уровня%20операционной%20системы.png)  
Достоинства:
- Высокая эффективность использования аппаратных ресурсов
- Низкие накладные технические расходы
- Отличная управляемость
- Минимизация расходов на приобретение лицензий
  
Недостатки:
- Реализация только однородных вычислительных сред
## Виртуализация приложения
Подразумевает применение модели сильной изоляции прикладных программ с управляемым взаимодействием с ОС, при которой виртуализируется каждый экземпляр приложений, все его основные компоненты: файлы (включая системные), реестр, шрифты, INI-файлы, COM-объекты, службы. Приложения не вносят изменений в ОС и работают независимо друг от друга.  
Преимущества:
- Ускорение развертывания настольных систем и возможность управления ими
- Сведение к минимуму не только конфликтов между приложениями, но и потребности в тестировании приложений на совместимость
- Позволяет использовать на одном компьютере (в одной ОС) несколько несовместимых между собой приложений одновременно
- Позволяет пользователям запускать одно и то же заранее сконфигурированное приложение или группу приложений с сервера
  
![Виртуализация приложения](../Pictures/07_10.%20Виртуализация%20приложения.png)
#### Виртуализация приложений в контексте ЯП
**JVM** - Java Virtual Machine (Виртуальная машина языка Java) от компании Sun Microsystems.  
**Common Language Runtime** (англ. CLR - общеязыковая исполняющая среда) - исполняющая среда для байт-кода CIL (MSIL), в который компилируются программы, написанные на .NET-совместимых языках программирования (C#, Managed C++, Visual Basic .NET, F# и прочие). CLR является одним из основных компонентов пакета Microsoft .NET Framework.  
## Виртуализация представлений (рабочих мест)
Виртуализация представлений подразумевает эмуляцию интерфейса пользователя. Т. е., пользователь видит приложение и работает с ним на своем терминале, хотя на самом деле приложение выполняется на удаленном сервере, а пользователю передается лишь картинка удаленного приложения. В зависимости от режима работы пользователь может видеть удаленный рабочий стол и запущенное на нем приложение, либо только само окно приложения.  
![Виртуализация представлений](../Pictures/07_11.%20Виртуализация%20представлений.png)  
Сложности использования пользовательских ПК:
- Большие операционные издержки на поддержку компьютерного парка
- Сложность, связанная с управлением настольными ПК
- Обеспечение пользователям безопасного и надежного доступа к ПО и приложениям, необходимым для работы
- Техническое сопровождение пользователей
- Установка и обновление лицензий на ПО и техническое обслуживание
- Резервное копирование
- и т. д.
  
Уйти от этих сложностей и сократить издержки, связанные с их решением, возможно благодаря применению технологии виртуализации рабочих мест сотрудников на базе инфраструктуры виртуальных ПК - Virtual Desktop Infrastructure (VDI).  
Тонкий клиент с ThinOS:  
![Тонкий клиент с ThinOS](../Pictures/07_12.%20Тонкий%20клиент%20с%20ThinOS.png)  
Одноплатный микрокомпьютер Raspberry Pi:  
![Одноплатный микрокомпьютер Raspberry Pi](../Pictures/07_13.%20Одноплатный%20микрокомпьютер%20Raspberry%20Pi.png)
## Гипервизор
**Гипервизор** обеспечивает изолированную среду выполнения для каждой виртуальной машины, а также управляет доступом ВМ и гостевых ОС к аппаратным ресурсам физического сервера. Говоря простыми словами, гипервизор обеспечивает параллельное и независимое функционирование нескольких операционных систем на одном компьютере.  
Типы гипервизоров:
- **Первого типа** - запускаются непосредственно на "железе"
- **Второго типа** - запускаются на хостовой ОС
- **Гибридного типа (тип 1,5)** - сочетает характеристики первого и второго типов
#### Гипервизоры первого типа (native, bare-metal)
![Гипервизоры первого типа](../Pictures/07_14.%20Гипервизоры%20первого%20типа.png)  
Преимущества:
- Высокое быстродействие
  
Недостатки:
- Необходимость поддерживать драйверы устройств
- Меньше совместимого аппаратного обеспечения
  
Примеры: 
- VMWare ESXi
- KVM (Proxmox VE) - может быть также отнесен ко второму типу
- Xen (Xenserver, Citrix Hypervisor), Hyper-V - могут быть также отнесены к гибридному типу
#### Гипервизоры второго типа (hosted)
![Гипервизоры второго типа](../Pictures/07_15.%20Гипервизоры%20второго%20типа.png)  
Недостатки:
- Ниже быстродействие
- Реже используются в промышленной эксплуатации
  
Преимущества:
- Подходят для задач обучения и разработки ПО
  
Примеры:
- Oracle VM VirtualBox, VMWare Workstation
- KVM (Proxmox VE) - может быть также отнесен к первому типу
#### Гипервизоры гибридного типа (hybrid)
![Гипервизоры гибридного типа](../Pictures/07_16.%20Гипервизоры%20гибридного%20типа.png)  
Преимущества:
- Высокая совместимость с аппаратным обеспечением
- Гипервизор освобождается от задачи обработки вызовов к драйверам устройств - эти вызовы обрабатывает сервисная ОС
  
Примеры:
- Xen (XenServer, Citrix Hypervisor)
- Hyper-V - могут быть также отнесены к первому типу
## Проблемы виртуальных машин
- Операционные системы потребляют значительные объемы ресурсов (ОС host)
- Резервная копия виртуальной машины (часто это один-единственный файл) имеет очень большой размер
- Общий доступ к виртуальным машинам затруднен (требует настройки)
- Переносимость ВМ между устройствами
- Накладные расходы на взаимодействие: приложения <-> гостевая ОС <-> гипервизор <-> хостовая ОС
- Низкая эффективность использования ресурсов
## Контейнеры (Docker)
**Контейнер** - виртуальная среда, в которую упаковываются процесс приложения, метаданные и файловая система, т. е. все, что необходимо приложению для работы (зависимости).  
![Контейнер](../Pictures/07_17.%20Контейнер.png)  
Преимущества Docker-контейнеров:
- Легковесность
- Переносимость
- Повторное использование
- Скорость развертывания
- Эффективность использования ресурсов
#### Компоненты Docker
- **Сервер, или демон Docker** - выполняется в хост-системе и управляет всеми запущенными контейнерами
- **Контейнер Docker** - автономная виртуальная система, содержащая выполняющийся процесс, все файлы, зависимости, адресное пространство процесса и сетевые порты, необходимые приложению
- **Клиент Docker** - пользовательский интерфейс, или интерфейс командной строки, для взаимодействия с демоном Docker
- **Образы Docker** - шаблонные файлы, доступные только для чтения, с контейнером Docker
- **Реестр Docker** - репозиторий для хранения и распространения образов контейнеров Docker (например, Docker Hub)
- **Файл Dockerfile** - текстовый файл, содержащий команды, которые выполняют сборку образов Docker
- **Docker Machine** - позволяет развертывать узлы Docker на локальной машине или внутри общедоступного либо частного облака
- **Docker Swarm** - механизм кластеризации, позволяющий объединить несколько узлов Docker в один большой хост Docker
- **Компоновщик Docker Compose** - позволяет запустить приложение, состоящее из нескольких контейнеров
#### Архитектура Docker
![Архитектура Docker](../Pictures/07_18.%20Архитектура%20Docker.png)
## Сравнение приложения в ВМ и Docker
![Сравнение приложения в ВМ и Docker](../Pictures/07_19.%20Сравнение%20приложения%20в%20ВМ%20и%20Docker.png)
- Простота обновления
- Повторное использование
- Простота кластеризации
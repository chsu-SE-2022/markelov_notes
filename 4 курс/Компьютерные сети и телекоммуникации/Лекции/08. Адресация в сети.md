## IP-адрес
#### IPv4-адрес
32-битное бинарное число. Имеет длину 4 байта. Записывается в виде 4 десятичных чисел, от 0 до 255 каждое. Состоит из 4 октетов (256 = $2^8$).  
`128.10.2.30` - десятичная форма представления адреса.  
`10000000.00001010.00000010.00011110` - двоичная форма представления адреса.  
Логически он состоит из 2 частей:
- Адреса сети (network) - номер сети показывает, к какой сети принадлежит адресат
- Адреса машины (host) - номер узла в сети, хост-часть идентифицирует сетевое устройство в этой сети
  
Компьютеры с одинаковой сетевой частью находятся в одной локальной сети, а потому могут легко обмениваться данными.  
#### Классы IPv4-адресов
Примерное разбиение IP-адресов в зависимости от класса сети на сетевую (N) и машинную (H) части:

| Класс   | 1 октет | 2 октет | 3 октет | 4 октет |
| ------- | ------- | ------- | ------- | ------- |
| Класс A | N       | H       | H       | H       |
| Класс B | N       | N       | H       | H       |
| Класс C | N       | N       | N       | H       |
  
| Класс | Наименьший номер сети | Наибольший номер сети |
| ----- | --------------------- | --------------------- |
| A     | `1.0.0.0`             | `126.0.0.0`           |
| B     | `128.0.0.0`           | `191.255.0.0`         |
| C     | `192.0.1.0`           | `223.255.255.0`       |
| D     | `224.0.0.0`           | `239.255.255.255`     |
| E     | `240.0.0.0`           | `247.255.255.255`     |
#### Соглашения об особой интерпретации IP-адресов
- Если весь IP-адрес состоит только из двоичных нулей, то он обозначает адрес того узла, который сгенерировал этот пакет
- Если в поле номера сети стоят только нули, то по умолчанию считается, что узел назначения принадлежит той же самой сети, что и узел, который отправил пакет
- Если все двоичные разряды IP-адреса равны 1, то пакет с таким адресом назначения должен рассылаться всем узлам, находящимся в той же сети, что и источник этого пакета. Такая рассылка называется **ограниченным широковещательным сообщением (limited broadcast)**
- Если в поле номера узла назначения стоят только единицы, то пакет, имеющий такой адрес, рассылается всем узлам сети с заданным номером сети. Такая рассылка называется **широковещательным сообщением (broadcast)**
#### Порядок распределения IP-адресов
Номера сетей назначаются:
- Либо централизованно, если сеть является частью интернета
- Либо произвольно, если сеть работает автономно
  
Номера узлов администратор назначает по своему усмотрению, не выходя из разрешенного для этого класса сети диапазона.
#### Маска
Чтобы гибко устанавливать границу между номером сети и номером узла, используется маска.  
**Маска** - это число, которое используется в паре с IP-адресом. Двоичная запись маски содержит единицы в тех разрядах, которые должны в IP-адресе интерпретироваться как номер сети. Поскольку номер сети является цельной частью адреса, единицы в маске также должны представлять непрерывную последовательность.  
Маска определяет, какая часть IP-адреса применяется для задания сетевой и подсетевой части.  
Маску подсети можно определить следующим образом:
- запишем IP-адрес в бинарном виде
- все разряды, относящиеся к network-часть, заменим на 1
- все значения, относящиеся к host-части, заменим на 0
  
В результате получим маску подсети.  
Маска подсети для целой сети:
- класса A будет выглядеть как `255.0.0.0`
- класса B - `255.255.0.0`
- класса C - `255.255.255.0`
  
Для разделения на подсети нужно некоторые биты хост-части выделить для **подсети**.  
Например, маска `255.255.255.192` определяет подсеть класса C, для которой количество хостов будет равно 62.
#### Дефицит IP-адресов
Очень трудно получить адрес класса B и невозможно стать обладателем адреса класса A.  
Дефицит обусловлен:
- ростом сетей
- имеющееся множество IP-адресов используется нерационально
  
Очень часто владельцы сети класса C расходуют лишь небольшую часть из имеющихся у них 254 адресов.  
Решение проблемы - технологии, направленные на более экономное расходование IP-адресов:
1. **Технология масок и ее развитие** - технология бесклассовой междоменной маршрутизации (Classless Inter-Domain Routing, CIDR). CIDR отказывается от традиционной концепции разделения адресов протокола IP на классы, что позволяет получать в пользование столько адресов, сколько реально необходимо. Благодаря CIDR поставщик услуг получает возможность "нарезать" блоки из выделенного ему адресного пространства в точном соответствии с требованиями каждого клиента, при этом у него остается пространство для маневра на случай его будущего роста
2. **Технология трансляции адресов** (Network Address Translator, NAT) - узлам внутренней сети адреса назначаются произвольно (в соответствии с общими правилами, определенными в стандарте), так, как будто эта сеть работает автономно. Внутренняя сеть соединяется с интернетом через некоторое промежуточное устройство (маршрутизатор, межсетевой экран). Это промежуточное устройство получает в свое распоряжение некоторое количество внешних "нормальных" IP-адресов, согласованных с поставщиком услуг или другой организацией, распределяющей IP-адреса. Промежуточное устройство способно преобразовывать внутренние адреса во внешние, используя для этого таблицы соответствия. Для внешних пользователей все многочисленные узлы внутренней сети выступают под несколькими внешними IP-адресами. При получении внешнего запроса это устройство анализирует его содержимое и при необходимости пересылает его во внутреннюю сеть, заменяя IP-адрес на внутренний адрес этого узла
3. Переход на новую версию **IPv6**, в которой резко расширяется адресное пространство за счет использования 16-байтных адресов:
	- Длина адреса IPv4 - 32 бит: 4 294 967 296 комбинаций
	- Длина адреса IPv6 - 128 бит: $2^{128}$ = 340 282 366 920 938 463 463 374 607 431 768 211 456 комбинаций
#### IPv6-адрес
Пример IPv6 адреса: `2001:0db8:0000:0000:0000:0000:0010:ad12` - состоит из 8 групп 16-ричных чисел, разделенных двоеточиями.  
Можно сократить нули слева направо: `2001:db8:10:ad12`.
## MAC-адрес
**MAC-адрес** - уникальная комбинация цифр и букв длиной 48 символов. Аппаратный номер оборудования (компьютера, сервера, роутера, порта, коммутатора), присваивается сетевой карте устройства еще на фабрике, то есть в момент производства. Вшит аппаратно.  
**MAC** - уникальный физический адрес устройства, помогающий идентифицировать устройство среди миллионов других.  
В стандарте IEEE 802 канальный (второй, Data Link) уровень модели OSI разделен на 2 подуровня:
- Logical Link Control (LLC) или подуровень управления логической связью
- Media Access Control (MAC) или подуровень управления доступом к среде
  
MAC-адрес - 12-значное 16-ричное число или 6-байтовое двоичное число.  
Чаще всего MAC-адрес предоставляют именно в 16-ричной системе.  
`00-50-B6-5B-CA-6A` - 6 октетов, из которых состоит MAC. Каждый из октетов состоит из 2 знаков, итого 12-значное число.  
Первые 6 цифр (например, `00-50-B6`) обозначают производителя сетевой карты. Также называют OUI (Organization Unique Identifier).  
Известные MAC OUI популярных вендоров:
- `CC-46-D6` - Cisco
- `3C-5A-B4` - Google, Inc.
- `3C-D9-2B` - Hewlett Liackard
- `00-9A-CD` - Huawei Technologies Co., Ltd.
  
Вторые 6 цифр уникальны и идентифицируют NIC (Network Interface Controller).  
MAC-адреса записывают по-разному: через тире, двоеточие или точки:
- `00-50-B6-5B-CA-6A` - самая распространенная форма записи
- `00:50:B6:5B:CA:6A` - используется в Linux-системах
- `005:0b6:5bc:a6a` - формат записи MAC-адреса, используется компанией Cisco
<html>
<head>
   <title>Выборка с упорядочением</title>

</head>

<body background="fon.jpg">
<div align="center"><b><font>2.4. Выборка с упорядочением</font></b></div><font size = "-1">


<p align=justify>Синтаксис фразы упорядочения был дан в п. <a href=2-1.htm>2.1</a>. Простейший вариант этой фразы - упорядочение строк результата по значению одного из столбцов с указанием порядка сортировки или без такого указания. (По умолчанию строки будут сортироваться в порядке возрастания значений в указанном столбце.)</P>
<p align=justify>Например, выдать перечень продуктов и содержание в них основных веществ в порядке убывания содержания белка</P>
<CENTER>
<TABLE BORDER=0 width=100%>
<TR><TH align=left></TH><TH colspan=4>Результат:</TH>
<TR valign=top><TD rowspan=3>
<TABLE><TR><TD><PRE>
SELECT	Продукт, Белки,
         Жиры, Углев
FROM	Продукты
ORDER	BY Белки DESC;
</PRE></TD></TR></TABLE></TD>

<TD>
<TABLE>
<TR><th>Продукт</th><TH>Белки</th><TH>Жиры</TH><th>Углев</TH></TR>
<TR><TD>Судак</TD><TD>190.</TD><TD>80.</TD><TD>0.</TD></TR>
<TR><TD>Говядина</TD><TD>189.</TD><TD>124.</TD><TD>0.</TD></TR>
<TR><TD>Творог</TD><TD>167.</TD><TD>90.</TD><TD>13.</TD></TR>
<TR><TD>Яйца</TD><TD>127.</TD><TD>115.</TD><TD>7.</TD></TR>
<TR><TD>Кофе</TD><TD>127.</TD><TD>36.</TD><TD>9.</TD></TR>
<TR><TD>Мука</TD><TD>106.</TD><TD>13.</TD><TD>732.</TD></TR>
<TR><TH colspan=4>			  .  .  .</TH></TR>
</TABLE>
</TD></TR>
</TABLE></CENTER>


<p align=justify>При включении в список ORDER BY нескольких столбцов СУБД сортирует строки результата по значениям первого столбца списка пока не появится несколько строк с одинаковыми значениями данных в этом столбце. Такие строки сортируются по значениям следующего столбца из списка ORDER BY и т.д.</P>
<p align=justify>Например, выдать содержимое таблицы Блюда, отсортировав ее строки по видам блюд и основе:</P>
<CENTER>
<TABLE BORDER=0 width=100%>
<TR><TH align=left></TH><TH colspan=4>Результат:</TH>
<TR valign=top><TD rowspan=3>
<TABLE><TR><TD><PRE>
SELECT	*
FROM	Блюда
ORDER	BY В
     Основа;
</PRE></TD></TR></TABLE></TD>

<TD>
<TABLE>
<TR><th>БЛ</TH><th>Блюдо</TH><th>В</TH><th>Основа</TH><th> Выход</th><TH> Труд</th></TR>
<TR><TD>21</TD><TD>Пудинг рисовый</TD><TD>Г</TD><TD>Крупа</TD><TD>160.</TD><TD>6</TD></TR>
<TR><TD>20</TD><TD>Каша рисовая</TD><TD>Г</TD><TD>Крупа</TD><TD>210.</TD><TD>4</TD></TR>
<TR><TD>18</TD><TD>Сырники</TD><TD>Г</TD><TD>Молоко</TD><TD>220.</TD><TD>4</TD></TR>
<TR><TH colspan=6>			  .  .  .</TH></TR>
<TR><TD>16</TD><TD>Драчена</TD><TD>Г</TD><TD>Яйца</TD><TD>180.</TD><TD>4</TD></TR>
<TR><TD>28</TD><TD>Крем творожный</TD><TD>Д</TD><TD>Молоко</TD><TD>160.</TD><TD>4</TD></TR>
<TR><TH colspan=6>			  .  .  .</TH></TR>
<TR><TD>26</TD><TD>Яблоки печеные</TD><TD>Д</TD><TD>Фрукты</TD><TD>160.</TD><TD>3</TD></TR>
<TR><TD>7</TD><TD>Сметана</TD><TD>З</TD><TD>Молоко</TD><TD>140.</TD><TD>1</TD></TR>
<TR><TD>8</TD><TD>Творог</TD><TD>З</TD><TD>Молоко</TD><TD>140.</TD><TD>2</TD></TR>
<TR><TD>2</TD><TD>Салат мясной</TD><TD>З</TD><TD>Мясо</TD><TD>200.</TD><TD>4</TD></TR>
<TR><TD>6</TD><TD>Мясо с гарниром</TD><TD>З</TD><TD>Мясо</TD><TD>250.</TD><TD>3</TD></TR>
<TR><TD>1</TD><TD>Салат летний</TD><TD>З</TD><TD>Овощи</TD><TD>200.</TD><TD>3</TD></TR>
<TR><TH colspan=6>			  .  .  .</TH></TR>
</TABLE>
</TD></TR>
</TABLE></CENTER>

<p align=justify>Кроме того, в список ORDER BY можно включать не только имя столбца, а его порядковую позицию в перечне SELECT. Благодаря этому возможно упорядочение результатов на основе вычисляемых столбцов, не имеющих имен.</P>
<p align=justify>Например, запрос</P>

<PRE>
SELECT	Продукт, ((Белки+Углев)*4.1+Жиры*9.3)
FROM	Продукты
ORDER	BY 2;</PRE>

<p align=justify>позволит получить список продуктов, показанный на рис.2.2,в – переупорядоченный по возрастанию значений калорийности список рис.2.2,а.</P>

<p align="center">
<a href="2-3-5.htm">2.3.5</a> | <a href="index.htm">Содержание</a> | <a href="2-5-1.htm">2.5.1</a>
</p>

</body>
</html>

**Задание: Разработка модуля учета книг в библиотеке**  
**Цель задания:** Закрепить на практике основные синтаксические конструкции и принципы встроенного языка «1С:Предприятие.Элемент»  
**Исходные данные:** Представьте, что вы создаете простой модуль для учета книг в библиотеке. Вам не нужно создавать формы или базу данных, вся работа будет происходить в коде.  
**Рекомендация:** Выполните задание в виде одного модуля, в котором последовательно реализуете все пункты. Это поможет увидеть, как разные концепции языка работают вместе для решения одной задачи.  
**Задача 1: Объявление структур данных**  
В начале модуля объявите:
1. Перечисление `ЖанрКниги` со значениями: `Роман`, `Фантастика`, `Детектив`, `НаучнаяЛитература`. Для значения `Роман` указать свойство - `умолчание`
2. Структуру Книга со следующими полями:
	- `Название` (тип `Строка`)
	- `Автор` (тип `Строка`)
	- `ГодИздания` (тип `Число`)
	- `Жанр` (тип `ЖанрКниги`)
	- `НаРучках` (тип `Булево`) - находится ли книга у читателя
	  
	Ориентируемся на пример из лекции:
	```bsl
	// Структуры и перечисления в модуле
	
	@Глобально
	перечисление ТипыКонтактнойИнформации
		Телефон умолчание,
		ЭлектроннаяПочта,
		Адрес
	;
	
	@Глобально
	структура КонтактнаяИнформация
		пер ТипКИ: ТипыКонтактнойИнформации
		пер Вид: Строка
		пер Значение: Строка
		пер Представление: Строка
		пер Комментарий: Строка
	;
	```
**Задача 2: Работа с коллекциями**  
Создайте и проинициализируйте массив Библиотека типа `Массив<Книга>`. Добавьте в него 3-4 книги, используя созданную структуру. Пример инициализации:
```bsl
// Задача 2: Работа с коллекциями

// 1. Создаем и инициализируем массив Библиотека

@Глобально
метод Библиотека(): Массив<Книга>
	пер Библиотека: Массив<Книга> = [новый Книга(
		Название = "Мастер и Маргарита",
		Автор = "Булгаков М.А.",
		ГодИздания = 1966,
		Жанр = ЖанрКниги.Роман,
		НаРучках = Ложь), новый Книга(
		Название = "Преступление и наказание",
		Автор = "Достоевский Ф.М.",
		ГодИздания = 1866,
		Жанр = ЖанрКниги.Роман,
		НаРучках = Истина), новый Книга(
		Название = "1984",
		Автор = "Оруэлл Дж.",
		ГодИздания = 1949,
		Жанр = ЖанрКниги.Фантастика,
		НаРучках = Ложь)]
		
	возврат Библиотека
```
1. Напишите метод `ДобавитьКнигу()`, который принимает параметры (`Библиотека`, `Название`, `Автор`, `Год издания`, `Жанр` и `На руках`) и добавляет новую книгу в массив Библиотека.
2. Напишите метод `НайтиКнигиПоАвтору()`, который принимает библиотеку и имя автора и возвращает все книги этого автора из массива `Библиотека` (тип результата - `Массив<Книга>`). Для поиска используйте метод массива Фильтровать с лямбда-выражением.  
	Как использовать метод `Фильтровать` был рассмотрен на лекции на примере массива фамилий:
	```bsl
	знч МассивФамилий = ["Иванов", "Волков", "Парамонов", "Карпова", "Дубронов"]
	
	// Функциональный подход (декларативный) - ищем фамилию Волков в массиве
	знч Волков = МассивФамилий.Фильтровать(Фамилия -> Фамилия == "Волков") // Результат = ["Волков"]
	
	если не Волков.Пусто()
		Сообщить("Пользователь по фамилии %{Волков.Первый()} найден!")
	;
	```
	Нужно учитывать что в данном задании более сложный массив состоящий из нескольких полей. Например если бы массив в коде выше был сложный и состоял из структуры ФИО (Фамилия, Имя и Отчество), то для обращения потребовалось бы доработать конструкцию `Фильтровать`:
	```
	знч Волков = МассивФамилий.Фильтровать(ФИО -> ФИО.Фамилия == "Волков")
	```
  
**Задача 3: Реализация бизнес-логики**  
Напишите метод `ВыдатьКнигу()`, который принимает библиотеку и название книги. Метод должен найти первую книгу с таким названием, у которой значение `НаРучках` равно `Ложь`, изменить его на `Истина` и вернуть всю структуру `Книга` в качестве результата. Если подходящей книги нет, метод должен вернуть `Неопределено`.  
Напишите метод `ВернутьКнигу()`, который принимает библиотеку и название книги и меняет значение `НаРучках` на `Ложь` у первой же найденной книги с этим названием, которая находится на руках. Используйте метод `Фильтровать` с лямбдой. Метод должен возвращать `Истина`, если операция прошла успешно, и `Ложь`, если такая книга на руках не найдена.  
**Задача 4: Аннотации и область видимости**  
Все методы пометьте аннотацией `@ВПодсистеме`.  
Метод `НайтиКнигиПоАвтору` должен быть доступен для вызова с клиента, но выполняться на сервере. Добавьте необходимые аннотации к этому методу.  
**Задача 5: Формирование отчета**  
Напишите метод `СформироватьОтчет(Библиотека: Массив<Книги>)`, который:
1. Используя интерполяцию строк, формирует заголовок: `"Отчет по библиотеке. Всего книг: {X}"`, где `{X}` - общее количество книг в массиве (нужно использовать встроенный метод массива `Размер()`)
2. В цикле `Для ... Из` перебирает массив `Библиотека` и для каждой книги с помощью интерполяции формирует строку вида: `"Название: 'Война и мир'. Автор: Толстой Л.Н. Статус: На руках"`. Статус должен выводиться `"В библиотеке"`, если книга не на руках, и `"На руках"` в противном случае
3. Метод должен возвращать готовый отчет типа `Строка`
  
**Задача 6: Демонстрационный метод**  
В модуле по учету книг в библиотеке нужно написать демонстрационный метод где будут использоваться все созданные ранее методы и массив Библиотека. Вызов этого метода нужно реализовать из обычную команду с представление `"Тест библиотеки"`, которую нужно добавить в Панель навигации.  
```bsl
// Задача 6: Демонстрационный метод (для тестирования функционала)
@ВПодсистеме
@НаКлиенте
метод ПротестироватьБиблиотеку()
	пер Библиотека = Библиотека()
	
	// Добавим новую книгу
	ДобавитьКнигу(Библиотека, "Убийство в Восточном экспрессе", "Кристи А.", 1934, ЖанрКниги.Детектив, Ложь)
	
	// Попробуем выдать книгу
		знч ВыданнаяКнига = ВыдатьКнигу(Библиотека, "1984")
	
	если ВыданнаяКнига != Неопределено
		Сообщить("Книга '1984' выдана читателю.")
	;
	
	// Найдем все книги Достоевского
		знч КнигиДостоевского = НайтиКнигиПоАвтору(Библиотека, "Достоевский Ф.М.")
	
	Сообщить("Найдено книг Достоевского: %{КнигиДостоевского.Размер()}")
	
	// Попробуем вернуть книгу
	знч КнигаВозвращена = ВернутьКнигу(Библиотека, "Преступление и наказание")
	если КнигаВозвращена 
		Сообщить("Книга 'Преступление и наказание" возвращена в библиотеку.")
	;
	
	// Сформируем и выведем отчет
	Сообщить(СформироватьОтчет(Библиотека))
```
**Результат для сдачи:** представьте преподавателю гиперссылку на ваше работающее приложение и логин/пароль тестового пользователя (созданного в разделе `Пользователи` карточки приложения), чтобы он мог проверить работу механизма.
<html>
<head>
   <title>О предложениях определения данных и оптимизации запросов</title>

</head>

<body background="fon.jpg">

<div align="center"><b><font>Глава 5. О предложениях определения данных и оптимизации запросов<br>5.1. Системный каталог</font></b></div><font size = "-1">

<p align=justify>Системный каталог - это набор таблиц, в которых содержится информация, необходимая для правильного функционирования СУБД: о поддерживаемых базах данных и их базовых таблицах, представлениях, курсорах, индексах, пользователях и их правах доступа к информации, правилах модификации данных и т.д. В разных СУБД, поддерживающих SQL, существует от десятка до нескольких десятков системных таблиц, структура которых ничем не отличается от уже знакомой нам структуры пользовательских таблиц.</p>
<p align=justify>Так, в каждой строке системной таблицы SYSTABLES хранится описание одной из таблиц пользовательских или системной баз данных. Для каждой из них указывается имя таблицы, имя пользователя, который создал эту таблицу, число столбцов в ней и ряд других элементов информации. В таблице SYSCOLUMNS содержится строка для каждого столбца каждой таблицы, в которой указано имя столбца, имя таблицы, частью которой является данный столбец, тип данных для этого столбца и много другой информации о столбце.</p>
<p align=justify>С помощью предложения SELECT пользователь может получить информацию из любой системной таблицы. Например, он может дать запрос на получение имен таблиц, числа их столбцов и строк, владельца и краткого описания (если таковое вводилось в базу данных):</p>
<pre>
SELRCT	Tab_name,N_col,N_row,Tab_owner,Comments
FROM	SYSTABLES;
</pre>
<p align=justify>и получить результат, показанный на рис. 5.1,а.</p>
<p align=justify>Для получения же некоторых данных о столбцах таблицы Блюда можно дать запрос</p>
<pre>
SELECT	Col_name, Type, Length, Comments
FROM	SYSCOLUMNS
WHERE	Tab_name = 'Блюда';
</pre>
<p align=justify>и получить результат, показанный на рис. 5.1,б. </p>
<P>а)</P>
<TABLE>
<TR><TH>Tab_name</TH><TH>N_col</TH><TH>N_row</TH><TH>Tab_owner</TH><TH>Comments </TH></TR>
<TR><TH colspan=5>		 ...</TH></TR>
<TR><TD>SYS_TABLES </TD><TD colspan=2> 11          </TD><TD colspan=2>  SYSTEM</TD></TR>
<TR><TD>SYS_COLUMNS </TD><TD colspan=2>14          </TD><TD colspan=2>  SYSTEM</TD></TR>
<TR><TH colspan=5>		...</TH></TR>
<TR><TD>Блюда   </TD><TD>    6  </TD><TD>    33  </TD><TD>   KIRILLOW</TD><TD>   Перечень блюд, известных шеф-повару</TD></TR>
<TR><TD>Поставки   </TD><TD> 4     </TD><TD> 37 </TD><TD>    GROMOW</TD><TD>     Данные о поставляемых продуктах</TD></TR>
<TR><TD>Вид_блюд   </TD><TD> 2   </TD><TD>   5     </TD><TD> KIRILLOW </TD><TD>  Перечень видов блюд</TD></TR>
<TR><TD>Трапезы    </TD><TD> 2 </TD><TD>     3   </TD><TD>   GROMOW </TD><TD>    Перечень трапез в пансионате</TD></TR>
<TR><TD>Состав    </TD><TD>  3    </TD><TD>  148 </TD><TD>   KIRILLOW </TD><TD>  Состав блюд</TD></TR>
<TR><TD>Продукты </TD><TD>   11  </TD><TD>   17 </TD><TD>    KIRILLOW </TD><TD>  Таблица продуктов</TD></TR>
<TR><TH colspan=5>		...</TH></TR>
</TABLE>
<P>б)</P>
<TABLE>
<TR><TH>Col_name</TH><TH>Type</TH><TH>Length</TH><TH>Comments</TH></TR>
<TR><TD>БЛ    </TD><TD>    INTEGER </TD><TD> 4  </TD><TD>     Код блюда</TD></TR>
<TR><TD>Блюдо </TD><TD>    TEXT    </TD><TD> 16 </TD><TD>     Название блюда</TD></TR>
<TR><TD>В     </TD><TD>    TEXT    </TD><TD> 1  </TD><TD>     Код вида блюда (З, С, ...)</TD></TR>
<TR><TD>Основа </TD><TD>   TEXT    </TD><TD> 6  </TD><TD>     Основной продукт в блюде</TD></TR>
<TR><TD>Выход  </TD><TD>   REAL    </TD><TD> 4  </TD><TD>     Масса порции готового блюда</TD></TR>
<TR><TD>Труд    </TD><TD>  INTEGER </TD><TD> 4  </TD><TD>     Стоимость приготовления блюда (коп)</TD></TR>
</TABLE>
<p align=center><i>Рис. 5.1. Результаты запросов по системным таблицам</i></p>

<p align=justify>Пользователь, не знакомый со структурой базы данных, может с помощью подобного рода запросов получить информацию о такой структуре. Для этого ему надо владеть языком SQL и немного подумать.</p>
<p align=justify>В заключение следует отметить, что СУБД не позволяет обновлять каталог с помощью предложений DELETE, INSERT и UPDATE. Обновление проводится только при создании, модификации или уничтожении таблиц, индексов, правил и т.п. с помощью предложений, рассматриваемых ниже.</p>

<p align="center">
<a href="4-5.htm">4.5</a> | <a href="index.htm">Содержание</a> | <a href="5-2.htm">5.2</a>
</p>

</body>
</html>

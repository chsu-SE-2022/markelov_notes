Собственно проектирование классов предполагает окончательное определение структуры и поведения его объектов. Структура объектов определяется совокупностью атрибутов и операций класса. Каждый атрибут - это поле или совокупность полей данных, содержащихся в объекте класса.  
Поведение объектов класса определяется реализуемыми обязанностями. Обязанности выполняются посредством операций класса.  
Таким образом, при проектировании класса, помимо имени и максимально полного списка атрибутов, необходимо уточнить его ответственность и операции. Причем как атрибуты, так и операции в процессе проектирования целесообразно дополнительно специфицировать. В зависимости от степени детализации диаграммы классов обозначение атрибута может, помимо имени, включать: тип, описание видимости и значение по умолчанию. Для этого используют следующий формат:
```
<признак видимости> <имя>: <тип> = <значение по умолчанию>
```
где признак видимости может принимать одно из трех значений: 
- `+` - общий
- `#` - защищенный
- `-` - скрытый
  
Как упоминалось выше, операциями называют основные действия, реализуемые классом. В отличие от методов, операции не всегда реализуются классом непосредственно. Например, операция Ввод числа может быть реализована агрегатированным интерфейсным элементом "окно ввода".  
Полное описание операции на диаграмме класса в UML может выглядеть следующим образом:  
```
<признак видимости> <имя>(<список параметров>): <тип возвращаемого значения>
```
**Ответственностью** класса называют кратное неформальное перечисление основных функций объектов класса. Ответственность класса обычно определяют на начальных этапах проектирования, когда атрибуты и операции класса еще не определены. Эту информацию отображают на диаграмме классов в специальных секциях условного изображения класса:  
![Полное условное обозначение класса в UML](../Pictures/08_01.%20Полное%20условное%20обозначение%20класса%20в%20UML.png)  
Исходный список операций класса формируют, анализируя диаграммы деятельностей, диаграммы взаимодействия и диаграммы последовательностей действий, построенные для различных сценариев с участием объектов проектируемого класса. На начальных этапах проектирования в секции операций класса обычно указывают лишь имена основных операций, определяющих наиболее общее поведение объектов соответствующих классов. По мере уточнения добавляют новые операции, а информацию об уже имеющихся операциях детализируют.  
Большинство атрибутов выявляется при анализе предметной области, требований технического задания и описаний потоков событий.  
Кроме того, как указывалось выше, отношение ассоциации и его подвиды - агрегация и композиция - означают наличие обмена сообщениями между объектами классов. Для организации передачи сообщений необходимо, чтобы генерирующий сообщения объект содержал информацию о вызываемом объекте, что означает наличие у этого объекта соответствующего указателя. Причем при отношении композиции объекты-части могут быть организованы как объектные поля объекта-целого.  
В том случае, если объекты проектируемого класса должны реализовывать сложное поведение, для них целесообразно разрабатывать диаграммы состояний.  
## Диаграммы состояний объекта
Под состоянием объекта применительно к диаграмме состояний понимают ситуацию в жизненном цикле объекта, во время которой он: удовлетворяет некоторому условию, осуществляет определенную деятельность или ожидает некоторого события. Изменение состояния, связанное с нарушением условия или, соответственно, завершением деятельности или наступлением события называют переходом.  
Диаграммы состояний показывают состояния объекта, возможные переходы, а также события или сообщения, вызывающие каждый переход.  
Условные обозначения состояний:
- Начальное состояние:  
	![Основные условные обозначения диаграммы состояний объекта - начальное состояние](../Pictures/08_02.%20Основные%20условные%20обозначения%20диаграммы%20состояний%20объекта%20-%20начальное%20состояние.png)
- Конечное состояние:  
	![Основные условные обозначения диаграммы состояний объекта - конечное состояние](../Pictures/08_03.%20Основные%20условные%20обозначения%20диаграммы%20состояний%20объекта%20-%20конечное%20состояние.png)
- Промежуточное состояние:  
	![Основные условные обозначения диаграммы состояний объекта - промежуточное состояние](../Pictures/08_04.%20Основные%20условные%20обозначения%20диаграммы%20состояний%20объекта%20-%20промежуточное%20состояние.png)
- Суперсостояние:  
	![Основные условные обозначения диаграммы состояний объекта - суперсостояние](../Pictures/08_05.%20Основные%20условные%20обозначения%20диаграммы%20состояний%20объекта%20-%20суперсостояние.png)
Действие, указанное после слова Вход, выполняется при входе в состояние, а действие, указанное после слова Выход - при выходе из него. Деятельность связывается с нахождением в состоянии.  
Переход обозначается линией со стрелкой и может быть помечен меткой, состоящей из трех частей, каждую из которых можно опустить:  
```
<Событие> [<Условие>]/<Действие>
```
Если **событие** не указано, то это означает, что переход выполняется по завершению деятельности, связанной с данным состоянием. Если же оно указано - то при наступлении события.  
**Условие** записывается в виде логического выражения. Переход происходит, если результат выражения - "истина". Объект не может одновременно перейти в два разных состояния, поэтому условия перехода для любого события должны быть взаимоисключающими.  
В отличие от деятельностей, **действия**, указанные для перехода, связывают с последним и рассматривают как мгновенные и непрерываемые.  
При необходимости можно определять суперсостояния, которые объединяют несколько состояний в одно. Этот механизм обычно используют, чтобы показать переход из нескольких состояний в одно и то же состояние, например, при отмене каких-либо действий.  
**Пример 1**. Разработать диаграмму состояний для объекта класса Решение.  
Диаграмму состояний объекта строим, анализируя соответствующие диаграммы последовательности действий. При этом необходимо уточнить, в какой момент разрешить прерывание процесса извне. Чтобы показать, что прерывание процесса возможно еще во время его инициализации, вводим суперсостояние Процесс. При реализации следует учесть возможность прерывания процесса до активации Алгоритма.  
![Диаграмма состояний объекта класса Решение](../Pictures/08_06.%20Диаграмма%20состояний%20объекта%20класса%20Решение.png)  
Результаты уточнения структуры и поведения объектов классов отразим на диаграмме классов.  
**Пример 2**. Уточнить атрибуты и операции классов Решение, Задание, Алгоритм, Данные и Результаты.  
**Класс Задание**. Поскольку объект класса Задание должен хранить идентификатор задачи и тип алгоритма, то он должен иметь соответствующие поля и включать операции Определить задач (), Определить алгоритм (), Сообщить тип задачи (), Сообщить тип алгоритма (). Кроме того, объект класса Задание отвечает за объекты классов Данные и Результаты, связанные с ним, следовательно, он должен хранить их адреса и выполнять операции: Определить данные (), Сообщить данные (), Фиксировать результаты (), Сообщить результаты ().  
**Классы Данные и Результаты**. Данные задач и их результаты должны храниться в базе данных, но они имеют различные структуры. Эту проблему можно решить, если хранить и данные, и результаты в упакованном виде, распаковывая их по мере надобности. Значит, соответствующие классы должны объявлять абстрактные операции Упаковать () и Распаковать (), которые будут реализовываться классами-подтипами в зависимости от реальной структуры данных, определяемой типом задачи. Следовательно, указанные классы должны также хранить тип задачи, с которой они связаны, и содержать операции Определить тип задачи () и Сообщить тип Задачи ().  
**Класс Алгоритм**. Объекты класса Алгоритм отвечают за реализацию метода решения задачи. Поскольку они посылают сообщение объектам класса Задания, то, естественно, должны хранить его адрес. Кроме того, класс Алгоритм должен объявлять абстрактную операцию Выполнить (). Эта операция должна переопределяться классами Алгоритм, реализующий метод.  
Возможно более удачное решение: в классе Алгоритм определить операцию Выполнить () и внутреннюю абстрактную операцию Реализовать метод (), которая вызывается из первой. Такое решение позволит не дублировать общее поведение всех алгоритмов, например, запрос и распаковку данных, а также упаковку и запись результата.  
**Класс Решение**. Объект класса Решение обращается к объектам классов Задание и Алгоритм, следовательно, необходимо хранить их адреса. Операции Начать () и Прервать () получены из диаграмм последовательностей действий. Операция Обработать исключение () получена оттуда же, но она должна реализовываться особым образом, так как будет получать управление через механизм исключений.  
Результаты уточнения:  
![Результат уточнения атрибутов и операций Задание, Решение, Алгоритм и Результаты](../Pictures/08_07.%20Результат%20уточнения%20атрибутов%20и%20операций%20Задание,%20Решение,%20Алгоритм%20и%20Результаты.png)  
## Проектирование методов класса
Достаточно существенную информацию о действиях, которые должны, выполняться методами класса, можно получить, анализируя диаграммы последовательности действий. Однако алгоритмы всех сколько-нибудь сложных методов необходимо проработать детально. При этом можно использовать как уже известные нотации (схемы алгоритмов и псевдокоды), так и диаграммы деятельностей.  
Диаграммы деятельностей могут использоваться при проектировании методов обработки сообщений, в том числе и затрагивающих несколько объектов. В последнем случае целесообразно указать вертикальными пунктирными линиями ответственности объектов соответствующих классов, что позволит проследить вызовы других объектов.  
Следует помнить, что в соответствии с общими правилами процедурной декомпозиции любую деятельность можно декомпозировать и изобразить в виде диаграммы деятельности более низкого уровня.  
**Пример 3**. Построить диаграмму деятельности для операции Начать () класса Решение. Анализ диаграмм показывает, что данная деятельность затрагивает три объекта уже детализированных классов Решение, Алгоритм и Задание. Определим зоны ответственности объектов этих классов:  
![Диаграмма деятельности для операции Решение.Начать()](../Pictures/08_08.%20Диаграмма%20деятельности%20для%20операции%20Решение.Начать().png)  
- объект класса Решение организует обработку, т. е. инициализирует переменные (в том числе определяет тип Алгоритма), создает объект класса Алгоритм требуемого типа, активизируют обработку, а затем уничтожает объект класса Алгоритм
- объект класса Задание должен в ответ на запрос сообщить тип Алгоритма, предоставить данные и запомнить результаты
- объект класса Алгоритм отвечает за решение задачи
  
Полностью спроектированные классы реализуют на конкретном языке программирования.
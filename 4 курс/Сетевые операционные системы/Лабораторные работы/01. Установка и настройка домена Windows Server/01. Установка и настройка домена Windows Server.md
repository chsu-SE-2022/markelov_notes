Лабораторная работа выполняется на виртуальных машинах. В ходе работы необходимо инсталлировать и настроить домен Windows, состоящий из контроллера домена и клиента. Предварительно необходимо определиться с именами доменов, именами компьютеров, IP-адресами.  
1. **Настройка виртуальной машины** (Oracle VM Virtual Box): выбор каталога для размещения, выбор диска, определение размера памяти. Периодически рекомендуется на виртуальной машине создавать снимок состояния для возможности отката на предыдущий этап.
2. **Установка системы** Windows Server (2008 R2 или 2016), и любого клиента (Windows XP, Windows 7, Windows 10). Пароль должен отвечать требованиям локальной политики безопасности. Посмотреть требования и внести изменения можно здесь: Пуск - Параметры безопасности - Локальная политика безопасности - Политика учетных записей - Политика паролей. Сменить пароль (Пуск - Администрирование - Управление компьютером - Локальные пользователи и группы - Пользователи - Администратор - Задать пароль)
3. **Настройка DNS-сервера**. DNS занимается разрешением доменных имен в адреса (разрешением записей - RR).
	- Для того, чтобы было понятна роль компьютера в сети переименуйте ваш компьютер в Server (Пуск - компьютер - Свойства - Ищем имя компьютера и Изменить параметры). Перезагрузка
	- Сетевой карте назначьте статический IP. Если не была включена поддержка сети на виртуальной машине, то в свойствах виртуальной машины добавляем сетевой адаптер (Только для узла). Центр управления сетями: назначаем статический адрес и стандартную маску
	- Установите DNS-сервер: Диспетчер сервера - Роли – Добавить роль - DNS-сервер … - Установить - Закрыть
	- Конфигурирование DNS-сервера: Диспетчер сервера - Роли – DNS-сервер - Имя нашего компьютера (Server) - Контекстное меню - Настройка DNS-сервера, в т. ч. создайте и настройте:
		- зону прямого и обратного просмотра (прямой просмотр - основная, имя `train.local`, динамические обновления нужны, но включить пока не можем, т. к. не установлена AD
		- зону обратного просмотра - основная, идентификатор сети - это начало (первые три числа) нашего IP-адреса, серверы пересылки не создаем
4. **Настройка домена Active Directory на Windows Server**
	- Установка .NET Framework (Пуск - Программы - Диспетчер сервера - Компоненты - Добавить компоненты - Выбрать - Возможности .NET Framework - Далее…. - Установить). Он необходим для установки AD
	- Добавление роли контроллера домена (Диспетчер сервера - Роли - Добавить роль - Доменная служба Active Directory - Далее… - Установить)
	- Настройка Active Directory. Для этого запустите из командной строки утилиту `dcpromo` (Пуск - Выполнить - `dcpromo`). Выберите - Расширенный режим установки:
		- создайте новый домен в новом лесу, задайте его имя (например, `train.local`)
		- выберите режим работы леса: Windows Server
		- введите пароль восстановления (может совпадать с паролем администратора) и далее происходит установка Active Directory
	- Завершение настройки службы DNS: Диспетчер сервера - Роли - DNS-сервер - Зоны прямого просмотра - Имя зоны нашего домена. В появившемся окне измените тип зоны с `Основного` на `Хранить зону в Active Directory`, ОК, Установите - Динамические обновления - Только безопасные динамические обновления. Применить. Проверьте сервер имен: должно быть полное имя нашего сервера (например, `Server.train.local`). Исправьте имя, настройте IP-адрес.
5. **Подключение компьютера к домену** (производится на клиенте): в виртуальной среде необходимо убедиться, что сетевая карта настроена на общую сеть с контроллером домена: в параметрах виртуальной машины выбрать сетевой адаптер - переключатель `Только для узла`.
	- Настройка сетевого подключения: в свойствах сети клиента указываем IP-адрес, шлюз и DNS - наш сервер. Проверяем через командную строку: `cmd` и `ping server`
	- Подключите рабочую станцию к контроллеру домена: Мой компьютер - Свойства - Измените имя компьютера и принадлежность к домену - введите имя и пароль администратора домена
	- Смотрим на контроллере домена, появился ли наш компьютер в домене: Диспетчер сервера - Роли - Доменные службы AD - Пользователи и компьютеры - Домен - Компьютеры. Проверяем также доменную зону.
6. **Настройка DHCP-сервера.**
	- Установка и настройка сервера DHCP: Диспетчер сервера - Роли - DHCP. Введите все необходимые данные, настройте диапазон адресов, для авторизации используйте текущие учетные данные (указываем домен\пользователь)
	- Настройка клиента на динамическое получение адресов (DHCP)
	- Проверка работы DHCP на клиенте: в свойствах сетевой карты смотрим IP-адрес. Если адрес не принадлежит диапазону, заданному в настройках DHCP, то причиной может быть включенный DHCP в настройках виртуальной машины. Его следует отключить и повторить проверку адреса на клиенте
	- Проверяем раздачу адресов на сервере: Диспетчер сервера – Роли - DHCP - Имя - IPv4 - Область - Арендованные адреса
	- Проверяем возможность поиска компьютера по сети: на клиенте сеть - сетевое окружение или заходим из клиента на сервер по адресу
7. **Просмотр объектов Active Directory**: используя утилиту ADExplorer на клиентской машине, подключитесь к active directory найдите объекты для клиента и для сервера.
## Контрольные вопросы
1. Расскажите особенности настройки и использования виртуальной машины Oracle VM Virtual Box. Какие сетевые настройки виртуальных машин применялись для решения лабораторной работы?
2. Расскажите, какие роли были установлены на сервер. Продемонстрируйте на сервере.
3. Что такое DNS-сервер? Для чего он нужен? В чем различие зоны прямого и обратного просмотра DNS? Продемонстрируйте что с клиента доступны ресурсы (расшаренная папка) сервера как по IP-адресу, так и по имени
4. Что такое DHCP-сервер? Для чего используется? Как конфигурируется? Как DHCP выбирает IP-адрес для клиента? Продемонстрируйте на сервере. Продемонстрируйте IP-адрес клиента на клиенте и IP-адрес клиента на сервере
5. Какие шаги были выполнены для подключения клиентской ОС к домену? Продемонстрируйте на клиенте что он подключен к домену
6. Что такое Active Directory? Для чего он нужен? Какую информацию хранит Active Directory и в каком виде?
7. Продемонстрируйте найденную по заданию информацию с помощью утилиты ADExplorer
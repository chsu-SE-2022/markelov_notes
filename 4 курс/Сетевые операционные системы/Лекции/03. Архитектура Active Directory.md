## Модель данных
**Объект** - это отдельный именованный набор атрибутов, которыми представлен сетевой ресурс. Атрибуты объекта являются его характеристиками в каталоге  
![Модель данных](../Pictures/03_01.%20Модель%20данных.png)  
## Функциональная структура
Многоуровневая архитектура AD:  
![Многоуровневая архитектура AD](../Pictures/03_02.%20Многоуровневая%20архитектура%20AD.png)  
## Основные компоненты служб
**Системный агент каталога** - выстраивает иерархию наследственных ("предок-потомок") отношений, хранящихся в каталоге. Предоставляет API-интерфейсы для вызовов доступа к каталогу. Клиенты получают доступ к AD, используя механизмы, поддерживаемые DSA  
**Уровень БД** - предоставляет уровень абстрагирования между приложениями и БД. Вызовы из приложений никогда не выполняются напрямую к БД, а только через уровень БД  
**Расширяемое ядро хранения** - напрямую взаимодействует с конкретными записями в хранилище каталога на основе атрибута относительного составного имени объекта  
**Хранилище данных** - управляется при помощи расширяемого механизма хранения БД, расположенного на контроллере домена
## База данных AD
Структурные объекты БД AD:
- **Разделы (сегменты)**. Разделы AD называются контекстами именования (NC - Naming Contexts) и содержат следующие сегменты: раздел домена каталога, раздел конфигурации каталога, раздел схемы каталога, раздел глобального каталога, разделы приложений каталога
- **Домены**
- **Деревья доменов**
- **Леса**
- **Сайты**
- **Организационные единицы**
## Логическая структура
![Логическая структура](03_03.%20Логическая%20структура.png)
## Физическая структура
![Физическая структура](../Pictures/03_04.%20Физическая%20структура.png)
## Контроллеры доменов и их роли
**Контроллер домена** - это компьютер-сервер, управляющий доменом и хранящий реплику каталога домена (локальную БД домена)  
Функции контроллеров доменов:
- Каждый контроллер домена хранит полную копию всей информации AD, относящейся к его домену
- Все контроллеры в домене автоматически реплицируют между собой все объекты в домене
- Важные обновления контроллеры домена реплицируют немедленно
- AD использует репликацию с несколькими хозяевами, в котором ни один из контроллеров домена не является главным. Все контроллеры равноправны, и каждый из них содержит копию базы данных каталога, в которую разрешается вносить изменения
- Наличие в домене нескольких контроллеров обеспечивает отказоустойчивость
- Контроллеры домена управляют взаимодействием пользователей и домена, например находят объекты AD и распознают попытки входа в сеть
## Роль хозяина операций в контроллере домена
- Хозяин RID
- Эмулятор основного контроллера домена
- Хозяин инфраструктуры
  
![Роль хозяина операций в контроллере домена](03_05.%20Роль%20хозяина%20операций%20в%20контроллере%20домена.png)  
## Концепция сайтов
Сайты содержат объекты только 2 типов:
- Контроллеры доменов в границах сайта
- Связи сайта, сконфигурированные для соединения данного сайта с остальными
  
Деление на сайты не зависит от доменной (логической) структуры, т. е.:
- в сайте может быть один домен или несколько доменов
- в домене может быть несколько сайтов
  
Создание сайтов, структура которых отражает физическое расположение контроллеров доменов на площадках компании, может быть реализовано по одному из следующих вариантов:
- Структура с одним сайтом
- Структура с несколькими сайтами
  
Особенностями сайта являются:
- Оптимизация трафика тиражирования между сайтами по медленным линиям
- Помощь клиентам быстрее обнаруживать ближайшие к ним контроллеры